package sampleJFrame;

import java.awt.Color;
import java.awt.event.MouseEvent;
import java.util.Timer;

import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;

public class FieldPanel extends JPanel{
	private static final long serialVersionUID = 1L;
	JLabel gameLabel;
	Cat_Normal cat01;
	Cat_Normal cat02;
	JLayeredPane layeredPane;
	CatPot catPot;
	Animal animal;
	Timer timer;
	
	JLabel redLabel;
	
	
	//コンストラクタ
	public FieldPanel() {
		this.setBackground(Color.orange);
		this.setLayout(null);
//		new DDListener();
		
	}
	
	//コンストラクタが呼び出された後に手動で呼び出す
	public void prepareComponents() {
		
		layeredPane = new JLayeredPane();
		final int PANE_WIDTH = layeredPane.getWidth();
		final int PANE_HEIGHT = layeredPane.getHeight();
		layeredPane.setLayout(null);
		
		layeredPane.setBounds(0, 0, PANE_WIDTH, PANE_HEIGHT);
		this.add(layeredPane);
		
		//テスト
		redLabel = new JLabel();
		redLabel.setBounds(10, 10, 100, 100);
		redLabel.setBackground(Color.red);
		redLabel.setOpaque(true);
		this.layeredPane.add(redLabel, 500);
		
		
		cat01 = new Cat_Normal();
		cat02 = new Cat_Normal();
		
		catPot = new CatPot();
		catPot.setLocation(320, 380);
		this.layeredPane.add(catPot, JLayeredPane.DEFAULT_LAYER);
//		this.layeredPane.add(animal, JLayeredPane.DRAG_LAYER);
	}
	
	//カップの上でネコを話すと消えて得点が加算
	public void mouseReleased(MouseEvent e) {
		int x = e.getXOnScreen();
		int y = e.getYOnScreen();
		int px = (int) catPot.getLocationOnScreen().getX();
		int py = (int) catPot.getLocationOnScreen().getY();
		int ph = catPot.getHeight();
		int pw = catPot.getWidth();
		if( (px < x) && (x < px + pw) && (py < y) && (y <py + ph)) {
			//鳴き声を再生
//			MySpeaker.playSE(animal.voiceKey);
			//スコア計算と不可視化処理
//			sampleJFrame..MainWindow.gamePanel.score += animal.score;
//			String str = "SCORE：" + sampleJFrame.mianWindow.gamePanel.score;
//			sampleJFrame.MainWindow.gamePanel.menuBar.ScoreLabel.setText(str);
			animal.setVisible(false);
			//追加
//			generate Animal();
		} else {
//			animal.timer.start();
		}
		
	}
}
